this.W=function(a){var b=window,c=document,d=c.documentElement,e,f,g="style",h=[],i,j,k;if(typeof a=="function"){(j=b.addEventListener)?j("resize",a,!1):b.attachEvent("onresize",a),h.length||(e=c.createElement("span"),e[g].position="absolute",e[g].left="-999em",e.innerHTML="W",d.appendChild(e),f=e.offsetHeight,setInterval(function(){var a,b;if(f!=(b=e.offsetHeight)){a=h.length;while(a)h[--a]()}f=b},250)),h.push(a);return}return j=c.createElement("div"),j[g].width="1em",d.appendChild(j),i=j.offsetWidth,i=i?i:16,d.removeChild(j),typeof a=="number"?a/i:(j=d.offsetWidth,(k=b.innerWidth)||(k=d.clientWidth),j=(k-j)*100/k<5?k:j,a?j/i:j)};this.Sheethub=function(){var a=document,b="getElementsByTagName",c=a[b]("head")[0],d="removeChild",e="parentNode",f={},g=!1,h=[],i=0,j,k=[],l=a[b]("link"),m=a[b]("style"),n,o,p=function(){if(!--i){g=!0;var a=h.length;while(a)h[--a]()}},q=function(b){var f,g=!1,h=[],i,j="appendChild",k="styleSheet",l,m=function(){c[j](f=a.createElement("style")),f[k]||f[j](a.createTextNode(""))},n=function(){g=!0,l=h.length;while(l)h[--l]()},o={listen:function(a){h.push(a)},ready:function(){return g},set:function(a){f.tagName=="LINK"&&(f[e][d](f),m()),f[k]?f[k].cssText=a:f.firstChild.nodeValue=a,i=a},get:function(){return i},node:function(){return f}},p=function(){c?typeof b=="object"?(f=b,f.tagName=="LINK"?(this.XMLHttpRequest?l=new XMLHttpRequest:l=new ActiveXObject("Microsoft.XMLHTTP"),l.open("GET",f.href,!0),l.onreadystatechange=function(){l.readyState==4&&(i=l.responseText.replace(/\.\.\//g,""),n())},l.send(null)):i=f[k]?f[k].cssText:f.innerHTML):(m(),typeof b=="string"&&o.set(b),n()):setTimeout(p,250)};return p(),o},r={listen:function(a){h.push(a)},ready:function(){return g},has:function(a){return f[a]},add:function(a,b){r.has(a)||(f[a]=new q(b))},get:function(a){if(!a)return f;if(r.has(a))return f[a]},remove:function(a){r.has(a)&&(n=f[a].node(),n[e][d](n),delete f[a])}};n=-1;while(o=l[++n])o.rel!="icon"&&(k.push(o),++i);n=m.length;while(n)k.push(m[--n]);n=-1;while(j=k[++n])!(o=j.title)&&j.href&&(o=j.href.match(/([^\/]+)\.css$/)[1]),o&&(r.add(o,j),f[o].ready()?p():f[o].listen(p));return r}();(function(){var a=document,b=a.documentElement,c,d="test-mqs",e=window.Sheethub,f=function(){var a=e.get(),b=[],c,f,g,h,i,j,k,l,m="indexOf",n=function(){var a,c,d,f,g,h;for(a in b){d=b[a].split("and"),c=d.length;while(c)f=d[--c].match(/\(\s*(.+?)\s*:\s*(.+?)(px|em)\s*\)/),f&&(g=W(),h=f[2],f[3]=="em"&&(g=W(g)),e.get(a).node().disabled=f[1][m]("min")?g>h:g<h)}},o=function(a){var b,c,d=0,e=0;while(b!=-1||c!=-1){b=a[m]("{",d),c=a[m]("}",d),c>b&&b!=-1?(++e,d=b+1):(--e,d=c+1);if(!e)return c}return-1};d=0;for(c in a)if(!/mq\d+$/.test(c)){h=a[c].get(),l=0;do{i=h[m]("@media",l);if(i==-1)break;j=o(h.substr(i)),k=h.substr(i,j).match(/@media\s+(.+)and(.+)\{([\S\s]+)/i),k&&(e.add(f=c+".mq"+ ++d,k[3]),g=e.get(f).node(),g.media=k[1],b[f]=(k[2]+"").toLowerCase(),g.disabled=!0)}while(l=i+j)}W(n),n()};c=a.createElement("div"),c.id=d,c.style.position="absolute",c.style.top="-99em",b.appendChild(c),e.add(d,"#"+d+"{width:9px}"),e.get(d).node().media="only all",c.offsetWidth!=9&&(e.ready()?f():e.listen(f)),e.remove(d),b.removeChild(c)})();